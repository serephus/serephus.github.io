<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="index, follow" name=robots><link href=https://sereph.us/rss.xml rel=alternate title=RSS type=application/rss+xml><title>Serephus | 0396 - Rotate Function</title><link as=style href=https://sereph.us/css/style.css rel=preload><link href=https://sereph.us/css/reset-min.css rel=stylesheet><link href=https://sereph.us/css/suCSS-min.css rel=stylesheet><link href=https://sereph.us/css/style.css rel=stylesheet><link href=https://sereph.us/css/custom.css rel=stylesheet><link href=https://sereph.us/favicon.ico rel=icon><body><nav id=nav-bar><a href=/> /home/ </a><a href=/post> /post/ </a><a href=/leetcode> /leetcode/ </a><a href=/contact> /contact/ </a><div aria-label="Toggle theme" class=theme-toggle data-icon-base=https://sereph.us/icons.svg data-icon-dark=#darkMode data-icon-light=#lightMode data-sound-src=https://sereph.us/click.ogg id=theme-toggle role=button tabindex=0><svg class=icon><use id=theme-icon></use></svg></div></nav><main><article class=post><header class=post-header><h1>0396 - Rotate Function</h1></header><div class=post-content><h3 id=problem><a href=https://leetcode.com/problems/rotate-function/ rel=noopener target=_blank>problem</a></h3><p>You are given an integer array <code>nums</code> of length <code>n</code>.<p>Assume <code>arr<sub>k</sub></code> to be an array obtained by rotating <code>nums</code> by <code>k</code> positions clock-wise. We define the <strong>rotation function</strong> <code>F</code> on <code>nums</code> as follow:<ul><li><code>F(k) = 0 * arr<sub>k</sub>[0] + 1 * arr<sub>k</sub>[1] + ... + (n - 1) * arr<sub>k</sub>[n - 1].</code></ul><p>Return <em>the maximum value of</em> <code>F(0), F(1), ..., F(n-1)</code>.<p>The test cases are generated so that the answer fits in a <strong>32-bit</strong> integer.<p> <p><strong class=example>Example 1:</strong><pre>
<strong>Input:</strong> nums = [4,3,2,6]
<strong>Output:</strong> 26
<strong>Explanation:</strong>
F(0) = (0 * 4) + (1 * 3) + (2 * 2) + (3 * 6) = 0 + 3 + 4 + 18 = 25
F(1) = (0 * 6) + (1 * 4) + (2 * 3) + (3 * 2) = 0 + 4 + 6 + 6 = 16
F(2) = (0 * 2) + (1 * 6) + (2 * 4) + (3 * 3) = 0 + 6 + 8 + 9 = 23
F(3) = (0 * 3) + (1 * 2) + (2 * 6) + (3 * 4) = 0 + 2 + 12 + 12 = 26
So the maximum value of F(0), F(1), F(2), F(3) is F(3) = 26.
</pre><p><strong class=example>Example 2:</strong><pre>
<strong>Input:</strong> nums = [100]
<strong>Output:</strong> 0
</pre><p> <p><strong>Constraints:</strong><ul><li><code>n == nums.length</code><li><code>1 &lt;= n &lt;= 10<sup>5</sup></code><li><code>-100 &lt;= nums[i] &lt;= 100</code></ul><hr><h3 id=submission>submission</h3><pre class=language-rs data-lang=rs style=color:#fdf4c1aa;background-color:#282828><code class=language-rs data-lang=rs><span style=color:#928374;font-style:italic>// the most naive solution would be simulate
</span><span style=color:#928374;font-style:italic>// for i in 0..n: rotate the vec and sum the F(i)
</span><span style=color:#928374;font-style:italic>// the time complexity of which is O(n^2)
</span><span style=color:#928374;font-style:italic>// however we can optimize this with DP
</span><span style=color:#928374;font-style:italic>// F(k) = 0*A_k[0] + 1*A_k[1] + ... + (n-1)*A_k[n-1]
</span><span style=color:#928374;font-style:italic>// F(k-1) = 0*A_k-1[0] + 1*A_k-1[1] + ... + (n-1)*A_k-1[n-1]
</span><span style=color:#928374;font-style:italic>// from the rotation, we can derive:
</span><span style=color:#928374;font-style:italic>// F(k) - F(k-1) = S - n*A_k-1[n-1]
</span><span style=color:#928374;font-style:italic>// with S = sum(arr), n = len(arr)
</span><span style=color:#fa5c4b>impl </span><span style=color:#8ec07c>Solution </span><span>{
</span><span>    </span><span style=color:#fa5c4b>pub fn </span><span style=color:#8ec07c>max_rotate_function</span><span>(</span><span style=color:#fdf4c1>nums</span><span>: </span><span style=color:#fabd2f>Vec</span><span>&lt;</span><span style=color:#fa5c4b>i32</span><span>>) -> </span><span style=color:#fa5c4b>i32 </span><span>{
</span><span>        </span><span style=color:#fa5c4b>let</span><span> n </span><span style=color:#fe8019>=</span><span> nums.</span><span style=color:#fabd2f>len</span><span>() </span><span style=color:#fe8019>as </span><span style=color:#fa5c4b>i32</span><span>;
</span><span>        </span><span style=color:#fa5c4b>let</span><span> sum: </span><span style=color:#fa5c4b>i32 </span><span style=color:#fe8019>=</span><span> nums.</span><span style=color:#fabd2f>iter</span><span>().</span><span style=color:#fabd2f>sum</span><span>();
</span><span>        </span><span style=color:#928374;font-style:italic>// init F(0)
</span><span>        </span><span style=color:#fa5c4b>let</span><span> f0: </span><span style=color:#fa5c4b>i32 </span><span style=color:#fe8019>=</span><span> nums.</span><span style=color:#fabd2f>iter</span><span>()
</span><span>            .</span><span style=color:#fabd2f>enumerate</span><span>()
</span><span>            .</span><span style=color:#fabd2f>map</span><span>(|(</span><span style=color:#fdf4c1>idx</span><span>, &</span><span style=color:#fdf4c1>val</span><span>)| idx </span><span style=color:#fe8019>as </span><span style=color:#fa5c4b>i32 </span><span style=color:#fe8019>*</span><span> val)
</span><span>            .</span><span style=color:#fabd2f>sum</span><span>();
</span><span>        nums.</span><span style=color:#fabd2f>into_iter</span><span>()
</span><span>            .</span><span style=color:#fabd2f>rev</span><span>() </span><span style=color:#928374;font-style:italic>// notice the rev here
</span><span>            .</span><span style=color:#fabd2f>fold</span><span>((f0, f0), |(</span><span style=color:#fdf4c1>max</span><span>, </span><span style=color:#fdf4c1>cur</span><span>), </span><span style=color:#fdf4c1>val</span><span>| {
</span><span>                </span><span style=color:#928374;font-style:italic>// update max F and cur F
</span><span>                (max.</span><span style=color:#fabd2f>max</span><span>(cur), sum </span><span style=color:#fe8019>+</span><span> cur </span><span style=color:#fe8019>-</span><span> n </span><span style=color:#fe8019>*</span><span> val)
</span><span>            })
</span><span>            .</span><span style=color:#d3869b>0
</span><span>    }
</span><span>}
</span></code></pre></div></article></main><footer><hr><div id=footer-container><p>Made using <a rel="noopener noreferrer" href=https://github.com/Speyll/anemone target=_blank>anemone</a> Zola theme</div></footer><script defer src=https://sereph.us/js/script.js></script>