<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="index, follow" name=robots><link href=https://sereph.us/rss.xml rel=alternate title=RSS type=application/rss+xml><title>Serephus | 1488 - Avoid Flood in The City</title><link as=style href=https://sereph.us/css/style.css rel=preload><link href=https://sereph.us/css/reset-min.css rel=stylesheet><link href=https://sereph.us/css/suCSS-min.css rel=stylesheet><link href=https://sereph.us/css/style.css rel=stylesheet><link href=https://sereph.us/css/custom.css rel=stylesheet><link href=https://sereph.us/favicon.ico rel=icon><body><nav id=nav-bar><a href=/> /home/ </a><a href=/post> /post/ </a><a href=/leetcode> /leetcode/ </a><a href=/contact> /contact/ </a><div aria-label="Toggle theme" class=theme-toggle data-icon-base=https://sereph.us/icons.svg data-icon-dark=#darkMode data-icon-light=#lightMode data-sound-src=https://sereph.us/click.ogg id=theme-toggle role=button tabindex=0><svg class=icon><use id=theme-icon></use></svg></div></nav><main><article class=post><header class=post-header><h1>1488 - Avoid Flood in The City</h1></header><div class=post-content><h3 id=problem><a href=https://leetcode.com/problems/avoid-flood-in-the-city/ rel=noopener target=_blank>problem</a></h3><p>Your country has 10<sup>9</sup> lakes. Initially, all the lakes are empty, but when it rains over the <code>n<sup>th</sup></code> lake, the <code>n<sup>th</sup></code> lake becomes full of water. If it rains over a lake that is <strong>full of water</strong>, there will be a <strong>flood</strong>. Your goal is to avoid floods in any lake.<p>Given an integer array <code>rains</code> where:<ul><li><code>rains[i] > 0</code> means there will be rains over the <code>rains[i]</code> lake.<li><code>rains[i] == 0</code> means there are no rains this day and you <strong>must</strong> choose <strong>one lake</strong> this day and <strong>dry it</strong>.</ul><p>Return <em>an array <code>ans</code></em> where:<ul><li><code>ans.length == rains.length</code><li><code>ans[i] == -1</code> if <code>rains[i] > 0</code>.<li><code>ans[i]</code> is the lake you choose to dry in the <code>ith</code> day if <code>rains[i] == 0</code>.</ul><p>If there are multiple valid answers return <strong>any</strong> of them. If it is impossible to avoid flood return <strong>an empty array</strong>.<p>Notice that if you chose to dry a full lake, it becomes empty, but if you chose to dry an empty lake, nothing changes.<p> <p><strong class=example>Example 1:</strong><pre>
<strong>Input:</strong> rains = [1,2,3,4]
<strong>Output:</strong> [-1,-1,-1,-1]
<strong>Explanation:</strong> After the first day full lakes are [1]
After the second day full lakes are [1,2]
After the third day full lakes are [1,2,3]
After the fourth day full lakes are [1,2,3,4]
There's no day to dry any lake and there is no flood in any lake.
</pre><p><strong class=example>Example 2:</strong><pre>
<strong>Input:</strong> rains = [1,2,0,0,2,1]
<strong>Output:</strong> [-1,-1,2,1,-1,-1]
<strong>Explanation:</strong> After the first day full lakes are [1]
After the second day full lakes are [1,2]
After the third day, we dry lake 2. Full lakes are [1]
After the fourth day, we dry lake 1. There is no full lakes.
After the fifth day, full lakes are [2].
After the sixth day, full lakes are [1,2].
It is easy that this scenario is flood-free. [-1,-1,1,2,-1,-1] is another acceptable scenario.
</pre><p><strong class=example>Example 3:</strong><pre>
<strong>Input:</strong> rains = [1,2,0,1,2]
<strong>Output:</strong> []
<strong>Explanation:</strong> After the second day, full lakes are  [1,2]. We have to dry one lake in the third day.
After that, it will rain over lakes [1,2]. It's easy to prove that no matter which lake you choose to dry in the 3rd day, the other one will flood.
</pre><p> <p><strong>Constraints:</strong><ul><li><code>1 &lt;= rains.length &lt;= 10<sup>5</sup></code><li><code>0 &lt;= rains[i] &lt;= 10<sup>9</sup></code></ul><hr><h3 id=submission>submission</h3><pre class=language-rs data-lang=rs style=color:#fdf4c1aa;background-color:#282828><code class=language-rs data-lang=rs><span style=color:#fa5c4b>use </span><span>std::collections::HashMap;
</span><span style=color:#fa5c4b>use </span><span>std::collections::BTreeSet;
</span><span>
</span><span style=color:#fa5c4b>impl </span><span style=color:#8ec07c>Solution </span><span>{
</span><span>    </span><span style=color:#928374;font-style:italic>// Intuition: We delay the decision of pick a lake to dry
</span><span>    </span><span style=color:#928374;font-style:italic>// to the day we have to avoid flood
</span><span>    </span><span style=color:#928374;font-style:italic>// keep track the flooded lake, keep a set of days
</span><span>    </span><span style=color:#928374;font-style:italic>// are allowed to dry a lake, iterate through days, when we
</span><span>    </span><span style=color:#928374;font-style:italic>// encoutered a flooded lake in raining day, we take a day from
</span><span>    </span><span style=color:#928374;font-style:italic>// the set
</span><span>    </span><span style=color:#fa5c4b>pub fn </span><span style=color:#8ec07c>avoid_flood</span><span>(</span><span style=color:#fdf4c1>rains</span><span>: </span><span style=color:#fabd2f>Vec</span><span>&lt;</span><span style=color:#fa5c4b>i32</span><span>>) -> </span><span style=color:#fabd2f>Vec</span><span>&lt;</span><span style=color:#fa5c4b>i32</span><span>> {
</span><span>        </span><span style=color:#928374;font-style:italic>// keep track the states of lakes
</span><span>        </span><span style=color:#928374;font-style:italic>// the value is the previous rain day
</span><span>        </span><span style=color:#fa5c4b>let mut</span><span> flooded </span><span style=color:#fe8019>= </span><span>HashMap::new();
</span><span>        </span><span style=color:#928374;font-style:italic>// set of days of no rains
</span><span>        </span><span style=color:#fa5c4b>let mut</span><span> days </span><span style=color:#fe8019>= </span><span>BTreeSet::new();
</span><span>        </span><span style=color:#fa5c4b>let mut</span><span> schedule </span><span style=color:#fe8019>= </span><span style=color:#fabd2f>vec!</span><span>[</span><span style=color:#fe8019>-</span><span style=color:#d3869b>1</span><span>; rains.</span><span style=color:#fabd2f>len</span><span>()];
</span><span>        </span><span style=color:#fa5c4b>for </span><span>(idx, </span><span style=color:#fe8019>&</span><span>lake) </span><span style=color:#fe8019>in</span><span> rains.</span><span style=color:#fabd2f>iter</span><span>().</span><span style=color:#fabd2f>enumerate</span><span>() {
</span><span>            </span><span style=color:#fa5c4b>match</span><span> lake {
</span><span>                </span><span style=color:#d3869b>0 </span><span style=color:#fe8019>=> </span><span>{
</span><span>                    </span><span style=color:#928374;font-style:italic>// add this day to set
</span><span>                    days.</span><span style=color:#fabd2f>insert</span><span>(idx);
</span><span>                    </span><span style=color:#928374;font-style:italic>// leetcode will not accept our answer if
</span><span>                    </span><span style=color:#928374;font-style:italic>// we return -1 when not raining
</span><span>                    schedule[idx] </span><span style=color:#fe8019>= </span><span style=color:#d3869b>1</span><span>;
</span><span>                }
</span><span>                lake </span><span style=color:#fe8019>=> </span><span>{
</span><span>                    </span><span style=color:#fa5c4b>if let </span><span style=color:#fabd2f>Some</span><span>(filled) </span><span style=color:#fe8019>=</span><span> flooded.</span><span style=color:#fabd2f>get</span><span>(</span><span style=color:#fe8019>&</span><span>lake) {
</span><span>                        </span><span style=color:#928374;font-style:italic>// we need to schedule a way to dry this lake
</span><span>                        </span><span style=color:#fa5c4b>let </span><span style=color:#fabd2f>Some</span><span>(</span><span style=color:#fe8019>&</span><span>day) </span><span style=color:#fe8019>=</span><span> days.</span><span style=color:#fabd2f>range</span><span>(filled</span><span style=color:#fe8019>..</span><span>).</span><span style=color:#fabd2f>next</span><span>() </span><span style=color:#fa5c4b>else </span><span>{
</span><span>                            </span><span style=color:#928374;font-style:italic>// we don't have any day available
</span><span>                            </span><span style=color:#fa5c4b>return </span><span style=color:#fabd2f>vec!</span><span>[];
</span><span>                        };
</span><span>                        days.</span><span style=color:#fabd2f>remove</span><span>(</span><span style=color:#fe8019>&</span><span>day);
</span><span>                        schedule[day] </span><span style=color:#fe8019>=</span><span> lake;
</span><span>                    }
</span><span>                    </span><span style=color:#928374;font-style:italic>// update flooded state
</span><span>                    flooded.</span><span style=color:#fabd2f>insert</span><span>(lake, idx);
</span><span>                }
</span><span>            }
</span><span>        }
</span><span>        schedule
</span><span>    }
</span><span>}
</span></code></pre></div></article></main><footer><hr><div id=footer-container><p>Made using <a rel="noopener noreferrer" href=https://github.com/Speyll/anemone target=_blank>anemone</a> Zola theme</div></footer><script defer src=https://sereph.us/js/script.js></script>